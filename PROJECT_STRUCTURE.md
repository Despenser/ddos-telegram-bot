# Структура проекта

```
telegram-bot-load-tester/
│
├── src/
│   ├── main/
│   │   ├── java/com/loadtest/telegrambot/
│   │   │   ├── TelegramBotLoadTesterApplication.java    # Главный класс приложения
│   │   │   │
│   │   │   ├── config/                                   # Конфигурации
│   │   │   │   ├── LoadTestConfig.java                   # Конфигурация нагрузочного теста
│   │   │   │   └── TelegramBotConfig.java                # Конфигурация Telegram бота
│   │   │   │
│   │   │   ├── controller/                               # REST контроллеры
│   │   │   │   ├── LoadTestController.java               # Контроллер для управления тестами
│   │   │   │   └── GlobalExceptionHandler.java           # Обработчик исключений
│   │   │   │
│   │   │   ├── model/                                    # Модели данных
│   │   │   │   ├── ErrorInfo.java                        # Информация об ошибке
│   │   │   │   ├── RequestStats.java                     # Статистика одного запроса
│   │   │   │   ├── TestConfiguration.java                # Конфигурация теста
│   │   │   │   ├── TestResult.java                       # Результаты теста
│   │   │   │   └── ThreadStatistics.java                 # Статистика потока
│   │   │   │
│   │   │   └── service/                                  # Сервисы
│   │   │       └── LoadTestService.java                  # Основной сервис тестирования
│   │   │
│   │   └── resources/
│   │       ├── application.yml                           # Основная конфигурация
│   │       └── application-example.yml                   # Пример конфигурации
│   │
│   └── test/
│       ├── java/com/loadtest/telegrambot/
│       │   ├── TelegramBotLoadTesterApplicationTests.java # Основные тесты
│       │   └── service/
│       │       └── LoadTestServiceTest.java               # Тесты сервиса
│       │
│       └── resources/
│           └── application-test.yml                      # Тестовая конфигурация
│
├── examples/
│   └── requests.http                                     # Примеры HTTP запросов
│
├── pom.xml                                               # Maven конфигурация
├── .gitignore                                            # Git ignore файл
├── README.md                                             # Основная документация
├── QUICKSTART.md                                         # Быстрый старт
├── CONTRIBUTING.md                                       # Руководство по вкладу
├── PROJECT_STRUCTURE.md                                  # Этот файл
├── run.bat                                               # Скрипт запуска для Windows
└── run.sh                                                # Скрипт запуска для Linux/Mac
```

## Описание компонентов

### Основные компоненты

#### 1. TelegramBotLoadTesterApplication
Главный класс Spring Boot приложения. Точка входа в программу.

#### 2. Config
- **LoadTestConfig**: Параметры нагрузочного тестирования по умолчанию
- **TelegramBotConfig**: Настройки подключения к Telegram API

#### 3. Controller
- **LoadTestController**: REST API для запуска и управления тестами
- **GlobalExceptionHandler**: Централизованная обработка исключений

#### 4. Model
- **TestConfiguration**: Параметры конкретного теста
- **TestResult**: Результаты выполнения теста
- **ThreadStatistics**: Статистика по каждому потоку
- **RequestStats**: Статистика одного запроса
- **ErrorInfo**: Детальная информация об ошибках

#### 5. Service
- **LoadTestService**: Основная логика выполнения нагрузочных тестов
  - Управление пулом потоков
  - Отправка запросов
  - Сбор статистики
  - Обработка ошибок

## Технологический стек

- **Java 21**: Основной язык программирования
- **Spring Boot 3.4.0**: Фреймворк для создания приложения
- **OkHttp 4.12.0**: HTTP клиент для отправки запросов
- **Lombok**: Уменьшение boilerplate кода
- **Jackson**: Сериализация/десериализация JSON
- **Maven**: Система сборки проекта

## Ключевые возможности

### Многопоточность
Использование `ExecutorService` для создания пула потоков, каждый из которых независимо выполняет запросы к боту.

### Мониторинг
- Детальная статистика по каждому потоку
- Отслеживание успешных/неудачных запросов
- Измерение времени ответа
- Расчет RPS (requests per second)

### Гибкость
- Настраиваемое количество потоков
- Настраиваемое количество запросов
- Настраиваемая задержка между запросами
- Возможность тестировать разные методы API

### REST API
Полноценный REST API для:
- Запуска тестов
- Получения результатов
- Остановки выполняющихся тестов
- Просмотра истории тестов

## Поток выполнения

1. **Запуск теста** (POST /api/load-test/start)
   - Валидация конфигурации
   - Создание TestResult
   - Запуск асинхронного выполнения

2. **Выполнение теста**
   - Создание пула потоков
   - Запуск потоков
   - Каждый поток выполняет N запросов
   - Сбор статистики в реальном времени

3. **Завершение теста**
   - Ожидание завершения всех потоков
   - Агрегация статистики
   - Расчет финальных метрик
   - Сохранение результата

4. **Получение результатов** (GET /api/load-test/{testId})
   - Возврат детальной статистики
   - Информация о каждом потоке
   - Список всех ошибок

## Расширяемость

Проект легко расширяем для добавления:
- Новых методов Telegram API
- Различных стратегий нагрузки
- Экспорта результатов в разные форматы
- Интеграции с системами мониторинга
- Планировщика тестов
- WebSocket для real-time обновлений

